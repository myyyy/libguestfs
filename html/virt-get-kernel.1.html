
<html>
<head>
<title>virt-get-kernel</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel='stylesheet' href='pod.css' type='text/css' />
</head>
<body>


<ul id="index">
  <li><a href="#name">NAME</a></li>
  <li><a href="#synopsis">SYNOPSIS</a></li>
  <li><a href="#description">DESCRIPTION</a></li>
  <li><a href="#options">OPTIONS</a></li>
  <li><a href="#machine-readable-output">MACHINE READABLE OUTPUT</a></li>
  <li><a href="#environment-variables">ENVIRONMENT VARIABLES</a></li>
  <li><a href="#exit-status">EXIT STATUS</a></li>
  <li><a href="#see-also">SEE ALSO</a></li>
  <li><a href="#author">AUTHOR</a></li>
  <li><a href="#copyright">COPYRIGHT</a></li>
  <li><a href="#license">LICENSE</a></li>
  <li><a href="#bugs">BUGS</a></li>
</ul>

<h1 id="name">NAME</h1>

<p>virt-get-kernel - Extract kernel and ramdisk from guests</p>

<h1 id="synopsis">SYNOPSIS</h1>

<pre><code> virt-get-kernel [--options] -d domname

 virt-get-kernel [--options] -a disk.img</code></pre>

<h1 id="description">DESCRIPTION</h1>

<p>This option extracts the kernel and initramfs from a guest.</p>

<p>The format of the disk image is automatically detected unless you specify it by using the <i>--format</i> option.</p>

<p>In the case where the guest contains multiple kernels, the one with the highest version number is chosen. To extract arbitrary kernels from the disk image, see <a href="guestfish.1.html">guestfish(1)</a>. To extract the entire <code>/boot</code> directory of a guest, see <a href="virt-copy-out.1.html">virt-copy-out(1)</a>.</p>

<h1 id="options">OPTIONS</h1>

<dl>

<dt><b>--help</b></dt>
<dd>

<p>Display help.</p>

</dd>
<dt><b>-a</b> file</dt>
<dd>

</dd>
<dt><b>--add</b> file</dt>
<dd>

<p>Add <i>file</i> which should be a disk image from a virtual machine.</p>

<p>The format of the disk image is auto-detected. To override this and force a particular format use the <i>--format</i> option.</p>

</dd>
<dt><b>-a</b> URI</dt>
<dd>

</dd>
<dt><b>--add</b> URI</dt>
<dd>

<p>Add a remote disk. The URI format is compatible with guestfish. See <a href="guestfish.1.html#adding-remote-storage">&quot;ADDING REMOTE STORAGE&quot; in guestfish(1)</a>.</p>

</dd>
<dt><b>-c</b> URI</dt>
<dd>

</dd>
<dt><b>--connect</b> URI</dt>
<dd>

<p>If using libvirt, connect to the given <i>URI</i>. If omitted, then we connect to the default libvirt hypervisor.</p>

<p>If you specify guest block devices directly (<i>-a</i>), then libvirt is not used at all.</p>

</dd>
<dt><b>-d</b> guest</dt>
<dd>

</dd>
<dt><b>--domain</b> guest</dt>
<dd>

<p>Add all the disks from the named libvirt guest. Domain UUIDs can be used instead of names.</p>

</dd>
<dt><b>--format</b> raw|qcow2|..</dt>
<dd>

</dd>
<dt><b>--format</b> auto</dt>
<dd>

<p>The default for the <i>-a</i> option is to auto-detect the format of the disk image. Using this forces the disk format for the <i>-a</i> option on the command line.</p>

<p>If you have untrusted raw-format guest disk images, you should use this option to specify the disk format. This avoids a possible security problem with malicious guests (CVE-2010-3851).</p>

</dd>
<dt><b>--machine-readable</b></dt>
<dd>

<p>This option is used to make the output more machine friendly when being parsed by other programs. See <a href="#machine-readable-output">&quot;MACHINE READABLE OUTPUT&quot;</a> below.</p>

</dd>
<dt><b>-o</b> directory</dt>
<dd>

</dd>
<dt><b>--output</b> directory</dt>
<dd>

<p>This option specifies the output directory where kernel and initramfs from the guest are written.</p>

<p>If not specified, the default output is the current directory.</p>

</dd>
<dt><b>--prefix</b> prefix</dt>
<dd>

<p>This option specifies a prefix for the extracted files.</p>

<p>If a prefix is specified, then there will be a dash (<code>-</code>) after the prefix and before the rest of the file name; for example, a kernel in the guest like <code>vmlinuz-3.19.0-20-generic</code> is saved as <code>mydistro-vmlinuz-3.19.0-20-generic</code> when the prefix is <code>mydistro</code>.</p>

<p>See also <i>--unversioned-names</i>.</p>

</dd>
<dt><b>-q</b></dt>
<dd>

</dd>
<dt><b>--quiet</b></dt>
<dd>

<p>Don&#39;t print ordinary progress messages.</p>

</dd>
<dt><b>--unversioned-names</b></dt>
<dd>

<p>This option affects the destination file name of extracted files.</p>

<p>If enabled, files will be saved locally just with the base name; for example, kernel and ramdisk in the guest like <code>vmlinuz-3.19.0-20-generic</code> and <code>initrd.img-3.19.0-20-generic</code> are saved respectively as <code>vmlinuz</code> and <code>initrd.img</code>.</p>

<p>See also <i>--prefix</i>.</p>

</dd>
<dt><b>-v</b></dt>
<dd>

</dd>
<dt><b>--verbose</b></dt>
<dd>

<p>Enable verbose messages for debugging.</p>

</dd>
<dt><b>-V</b></dt>
<dd>

</dd>
<dt><b>--version</b></dt>
<dd>

<p>Display version number and exit.</p>

</dd>
<dt><b>-x</b></dt>
<dd>

<p>Enable tracing of libguestfs API calls.</p>

</dd>
</dl>

<h1 id="machine-readable-output">MACHINE READABLE OUTPUT</h1>

<p>The <i>--machine-readable</i> option can be used to make the output more machine friendly, which is useful when calling virt-get-kernel from other programs, GUIs etc.</p>

<p>Use the option on its own to query the capabilities of the virt-get-kernel binary. Typical output looks like this:</p>

<pre><code> $ virt-get-kernel --machine-readable
 virt-get-kernel</code></pre>

<p>A list of features is printed, one per line, and the program exits with status 0.</p>

<h1 id="environment-variables">ENVIRONMENT VARIABLES</h1>

<p>For other environment variables which affect all libguestfs programs, see <a href="guestfs.3.html#environment-variables">&quot;ENVIRONMENT VARIABLES&quot; in guestfs(3)</a>.</p>

<h1 id="exit-status">EXIT STATUS</h1>

<p>This program returns 0 if successful, or non-zero if there was an error.</p>

<h1 id="see-also">SEE ALSO</h1>

<p><a href="guestfs.3.html">guestfs(3)</a>, <a href="guestfish.1.html">guestfish(1)</a>, <a href="guestmount.1.html">guestmount(1)</a>, <a href="virt-copy-out.1.html">virt-copy-out(1)</a>, <a href="http://libguestfs.org/">http://libguestfs.org/</a>.</p>

<h1 id="author">AUTHOR</h1>

<p>Richard W.M. Jones <a href="http://people.redhat.com/~rjones/">http://people.redhat.com/~rjones/</a></p>

<h1 id="copyright">COPYRIGHT</h1>

<p>Copyright (C) 2013-2015 Red Hat Inc.</p>

<h1 id="license">LICENSE</h1>

<p>This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.</p>

<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>

<p>You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.</p>

<h1 id="bugs">BUGS</h1>

<p>To get a list of bugs against libguestfs, use this link: <a href="https://bugzilla.redhat.com/buglist.cgi?component=libguestfs&amp;product=Virtualization+Tools">https://bugzilla.redhat.com/buglist.cgi?component=libguestfs&amp;product=Virtualization+Tools</a></p>

<p>To report a new bug against libguestfs, use this link: <a href="https://bugzilla.redhat.com/enter_bug.cgi?component=libguestfs&amp;product=Virtualization+Tools">https://bugzilla.redhat.com/enter_bug.cgi?component=libguestfs&amp;product=Virtualization+Tools</a></p>

<p>When reporting a bug, please supply:</p>

<ul>

<li><p>The version of libguestfs.</p>

</li>
<li><p>Where you got libguestfs (eg. which Linux distro, compiled from source, etc)</p>

</li>
<li><p>Describe the bug accurately and give a way to reproduce it.</p>

</li>
<li><p>Run <a href="libguestfs-test-tool.1.html">libguestfs-test-tool(1)</a> and paste the <b>complete, unedited</b> output into the bug report.</p>

</li>
</ul>

</body>
</html>

